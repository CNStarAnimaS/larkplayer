{"version":3,"sources":["../js/html5.js"],"names":["Dom","document","window","Html5","player","options","ready","proxyWebkitFullscreen","disposeMediaElement","el","seconds","currentTime","ex","console","log","offsetWidth","offsetHeight","endFn","trigger","isFullscreen","beginFn","webkitPresentationMode","one","bind","on","off","webkitEnterFullScreen","userAgent","navigator","test","webkitExitFullScreenm","removeClass","webkitExitFullScreen","src","undefined","currentSrc","setSrc","source","sourceNodeList","$$","sourceArray","Array","from","map","value","type","docFragment","createDocumentFragment","forEach","sourceElem","createElement","appendChild","resetMediaElement","currentSource","val","controls","TEST_VID","isSupported","volume","canPlayType","canPlaySource","srcObj","canControlVolume","canControlPlaybackRate","playbackRate","Events","prototype","featuresVolumeControl","featuresPlaybackRate","featuresFullscreenResize","featuresProgressEvents","featuresTimeupdateEvents","parentNode","removeChild","hasChildNodes","firstChild","removeAttribute","load","sources","querySelectorAll","i","length","e","attr","hasAttribute","setAttribute","prop"],"mappings":"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","file":"html5.js","sourcesContent":["/**\n * @file html5 video api proxy\n * @author yuhui06(yuhui06@baidu.com)\n * @date 2017/11/6\n * @see https://html.spec.whatwg.org/#event-media-emptied\n * @see https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-src\n */\n\nimport * as Dom from './utils/dom';\nimport toTitleCase from './utils/to-title-case';\nimport normalizeSource from './utils/normalize-source';\nimport Component from './component';\n\nconst document = window.document;\n\nclass Html5 extends Component {\n    constructor(player, options, ready) {\n        super(player, options, ready);\n\n        // @todo 处理有 source 的情况\n\n        this.proxyWebkitFullscreen();\n    }\n\n    dispose() {\n        Html5.disposeMediaElement(this.el);\n        super.dispose();\n    }\n\n\n    setCurrentTime(seconds) {\n        try {\n            this.el.currentTime = seconds;\n        } catch (ex) {\n            console.log(ex, 'Video is not ready');\n        }\n    }\n\n    width() {\n        return this.el.offsetWidth;\n    }\n\n    height() {\n        return this.el.offsetHeight;\n    }\n\n    proxyWebkitFullscreen() {\n        if (!('webkitDisplayingFullscreen' in this.el)) {\n            return;\n        }\n\n        let endFn = function () {\n            this.trigger('fullscreenchange', {isFullscreen: false});\n        };\n\n        let beginFn = function () {\n            if ('webkitPresentationMode' in this.el\n                && this.el.webkitPresentationMode !== 'picture-in-picture') {\n\n                this.one('webkitendfullscreen', endFn);\n                this.trigger('fullscreenchange', {isFullscreen: true});\n            }\n        };\n\n        // @todo 改变执行事件时的 this\n        beginFn = beginFn.bind(this);\n        endFn = endFn.bind(this);\n\n        this.on('webkitbeginfullscreen', beginFn);\n        this.on('dispose', () => {\n            this.off('webkitbeginfullscreen', beginFn);\n            this.off('webkitendfullscreen', endFn);\n        });\n    }\n\n    supportsFullScreen() {\n        // return this.el.webkitSupportsFullscreen;\n\n        if (typeof this.el.webkitEnterFullScreen === 'function') {\n            const userAgent = window.navigator && window.navigator.userAgent || '';\n\n            // Seems to be broken in Chromium/Chrome && Safari in Leopard\n            if ((/Android/).test(userAgent) || !(/Chrome|Mac OS X 10.5/).test(userAgent)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    enterFullScreen() {\n        if (typeof this.el.webkitEnterFullScreen === 'function') {\n            this.el.webkitEnterFullScreen();\n        }\n    }\n\n    exitFullScreen() {\n        if (typeof this.el.webkitExitFullScreenm === 'function') {\n            // @test\n            this.player.removeClass('lark-fullscreen');\n\n            this.el.webkitExitFullScreen();\n        }\n    }\n\n    src(src) {\n        if (src === undefined) {\n            return this.el.currentSrc || this.el.src;\n        }\n\n        this.setSrc(src);\n    }\n\n    source(source) {\n        if (source === undefined) {\n            const sourceNodeList = Dom.$$('source', this.el);\n            const sourceArray = Array.from(sourceNodeList);\n            return sourceArray.map(value => {\n                return {\n                    src: value.src,\n                    type: value.type\n                };\n            });\n        } else {\n            source = normalizeSource(source);\n\n            let docFragment = document.createDocumentFragment();\n            source.forEach(value => {\n                const sourceElem = Dom.createElement('source', {\n                    src: value.src,\n                    type: value.type\n                });\n                docFragment.appendChild(sourceElem);\n            });\n            this.el.appendChild(docFragment);\n        }\n    }\n\n    reset() {\n        Html5.resetMediaElement(this.el);\n    }\n\n    currentSrc() {\n        if (this.currentSource) {\n            return this.currentSource.src;\n        }\n\n        return this.el.currentSrc;\n    }\n\n    setControls(val) {\n        this.el.controls = !!val;\n    }\n\n    getVideoPlaybackQuality() {\n\n    }\n}\n\n// HTML5 Support Testing\nHtml5.TEST_VID = document.createElement('video');\n\n/**\n * 检查是否支持 HTML5 video\n *\n * @return {boolean} 是否支持 HTML5 video\n */\nHtml5.isSupported = function () {\n    try {\n        Html5.TEST_VID.volume = 0.5;\n    } catch (ex) {\n        return false;\n    }\n\n    return !!(Html5.TEST_VID && Html5.TEST_VID.canPlayType);\n};\n\n/**\n * 检查是否支持指定类型的视频\n *\n * HTML5 api proxy\n *\n * @param {string} type 要检查的类型(mimetype)\n * @return {boolean} 是否支持\n */\nHtml5.canPlayType = function (type) {\n    return Html5.TEST_VID.canPlayType(type);\n};\n\nHtml5.canPlaySource = function (srcObj, options) {\n    return Html5.canPlayType(srcObj.type);\n};\n\n\n/**\n * 检查是否可以改变播放器的声音大小（许多移动端的浏览器没法改变声音大小，比如 ios）\n *\n * @return {boolean} 是否可以改变声音大小\n */\nHtml5.canControlVolume = function () {\n    // IE will error if Windows Media Player not installed #3315\n    try {\n        const volume = Html5.TEST_VID.volume;\n\n        Html5.TEST_VID.volume = (volume / 2) + 0.1;\n        return volume !== Html5.TEST_VID.volume;\n    } catch (ex) {\n        return false;\n    }\n};\n\n/**\n * 检查能否改变视频播放速度\n *\n * @return {boolean} 是否可以改变视频播放速度\n */\nHtml5.canControlPlaybackRate = function () {\n    // Playback rate API is implemented in Android Chrome, but doesn't do anything\n    // https://github.com/videojs/video.js/issues/3180\n    // if (browser.IS_ANDROID && browser.IS_CHROME && browser.CHROME_VERSION < 58) {\n    //     return false;\n    // }\n\n    try {\n        const playbackRate = Html5.TEST_VID.playbackRate;\n        Html5.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;\n        return playbackRate !== Html5.TEST_VID.playbackRate;\n    } catch (ex) {\n        return false;\n    }\n};\n\n// HTML5 video 事件\nHtml5.Events = [\n    'loadstart',\n    'suspend',\n    'abort',\n    'error',\n    'emptied',\n    'stalled',\n    'loadedmetadata',\n    'loadeddata',\n    'canplay',\n    'canplaythrough',\n    'playing',\n    'waiting',\n    'seeking',\n    'seeked',\n    'ended',\n    'durationchange',\n    'timeupdate',\n    'progress',\n    'play',\n    'pause',\n    'ratechange',\n    'resize',\n    'volumechange'\n];\n\nHtml5.prototype.featuresVolumeControl = Html5.canControlVolume();\n\nHtml5.prototype.featuresPlaybackRate = Html5.canControlPlaybackRate();\n\n// @todo\n// Html5.prototype.movingMediaElementInDOM = !browser.IS_IOS;\n\n// 表明进入全屏时，播放器是否自动改变视频大小\nHtml5.prototype.featuresFullscreenResize = true;\n\n// 表明是否支持 progress 事件\nHtml5.prototype.featuresProgressEvents = true;\n\n// 表明是否支持 timeupdate 事件\nHtml5.prototype.featuresTimeupdateEvents = true;\n\n// @todo patchCanPlayType\n\n\nHtml5.disposeMediaElement = function (el) {\n    if (!el) {\n        return;\n    }\n\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n\n    while (el.hasChildNodes()) {\n        el.removeChild(el.firstChild);\n    }\n\n    // 移除 src 属性，而不是设置 src=''（在 firefox 下会有问题）\n    el.removeAttribute('src');\n\n    // force the media element to update its loading state by calling load()\n    // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)\n    if (typeof el.load === 'function') {\n        // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n        (function () {\n            try {\n                el.load();\n            } catch (ex) {\n                console.log(ex);\n            }\n        }());\n    }\n};\n\nHtml5.resetMediaElement = function (el) {\n    if (!el) {\n        return;\n    }\n\n    const sources = el.querySelectorAll('source');\n    let i = sources.length;\n\n    while (i--) {\n        el.removeChild(sources[i]);\n    }\n\n    el.removeAttribute('src');\n\n    if (typeof el.load === 'function') {\n        // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n        (function () {\n            try {\n                el.load();\n            } catch (e) {\n                // satisfy linter\n            }\n        }());\n    }\n};\n\n\n// HTML5 video attributes proxy\n// 获取对应属性的值\n// muted defaultMuted autoplay controls loop playsinline\n[\n    'muted',\n    'defaultMuted',\n    'autoplay',\n    'controls',\n    'loop',\n    'playsinline'\n].forEach(attr => {\n    Html5.prototype[attr] = function () {\n        return this.el[attr] || this.el.hasAttribute(attr);\n    };\n});\n\n// HTML5 video attributes proxy\n// 设置对应属性的值\n// setMuted, setDefaultMuted, setAutoPlay, setLoop, setPlaysinline\n// setControls 算是特例\n[\n    'muted',\n    'defaultMuted',\n    'autoplay',\n    'loop',\n    'playsinline'\n].forEach(attr => {\n    Html5.prototype['set' + toTitleCase(attr)] = function (value) {\n        this.el[attr] = value;\n\n        if (value) {\n            this.el.setAttribute(attr, attr);\n        } else {\n            this.el.removeAttribute(attr);\n        }\n    };\n});\n\n// Wrap HTML5 video properties with a getter\n// paused, currentTime, duration, buffered, volume, poster, preload, error, seeking\n// seekable, ended, palybackRate, defaultPlaybackRate, played, networkState,\n// readyState, videoWidth, videoHeight\n[\n    'paused',\n    'currentTime',\n    'duration',\n    'buffered',\n    'volume',\n    'poster',\n    'preload',\n    'error',\n    'seeking',\n    'seekable',\n    'ended',\n    'playbackRate',\n    'defaultPlaybackRate',\n    'played',\n    'networkState',\n    'readyState',\n    'videoWidth',\n    'videoHeight'\n].forEach(prop => {\n    Html5.prototype[prop] = function () {\n        return this.el[prop];\n    };\n});\n\n// Wrap HTML5 video properties with a setter in the following format:\n// set + toTitleCase(propName)\n// setVolume, setSrc, setPoster, setPreload, setPlaybackRate, setDefaultPlaybackRate\n[\n    'volume',\n    'src',\n    'poster',\n    'preload',\n    'playbackRate',\n    'defaultPlaybackRate'\n].forEach(prop => {\n    Html5.prototype['set' + toTitleCase(prop)] = function (value) {\n        this.el[prop] = value;\n    };\n});\n\n\n// Wrap native functions with a function\n// pause, load, play\n[\n    'pause',\n    'load',\n    'play'\n].forEach(prop => {\n    Html5.prototype[prop] = function () {\n        return this.el[prop]();\n    };\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default Html5;"]}