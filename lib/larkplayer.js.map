{"version":3,"sources":["../js/larkplayer.js"],"names":["Dom","Events","scriptLoader","Plugin","document","window","normalize","el","options","readyFn","charAt","$","playsinline","undefined","larkplayer","player","version","dom","on","one","off","trigger","log","registerPlugin","deregisterPlugin","module","exports"],"mappings":";;AAMA;;IAAYA,G;;AACZ;;IAAYC,M;;AACZ;;;;AACA;;;;AACA;;IAAYC,Y;;AACZ;;IAAYC,M;;AACZ;;;;AAKA;;;;;;AAEA;AACA;;AApBA;;;;;;AAsBA,IAAMC,WAAWC,OAAOD,QAAxB;;AARA;AACA;AACA;;;AAQA,SAASE,SAAT,CAAmBC,EAAnB,EAAuBC,OAAvB,EAAgCC,OAAhC,EAAyC;AACrC,QAAI,OAAOF,EAAP,KAAc,QAAlB,EAA4B;AACxB,YAAIA,GAAGG,MAAH,CAAU,CAAV,MAAiB,GAArB,EAA0B;AACtBH,iBAAK,MAAMA,EAAX;AACH;;AAEDA,aAAKP,IAAIW,CAAJ,CAAMJ,EAAN,CAAL;AACH;;AAEDC,cAAUA,WAAW,EAArB;;AAEA;AACA,QAAIA,QAAQI,WAAR,KAAwBC,SAA5B,EAAuC;AACnCL,gBAAQI,WAAR,GAAsB,IAAtB;AACH;;AAEDH,cAAUA,WAAW,YAAY,CAAE,CAAnC;;AAEA,WAAO,EAACF,MAAD,EAAKC,gBAAL,EAAcC,gBAAd,EAAP;AACH;;AAGD,SAASK,UAAT,CAAoBP,EAApB,EAAwBC,OAAxB,EAAiCC,OAAjC,EAA0C;AAAA,qBAEZH,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,OAAvB,CAFY;AACtC;;;AACEF,MAFoC,cAEpCA,EAFoC;AAEhCC,WAFgC,cAEhCA,OAFgC;AAEvBC,WAFuB,cAEvBA,OAFuB;;;AAItC,QAAMM,SAAS,qBAAWR,EAAX,EAAeC,OAAf,EAAwBC,OAAxB,CAAf;;AAEA,WAAOM,MAAP;AACH;;AAGD;AACAD,WAAWE,OAAX,GAAqB,KAArB;;AAEA;AACAF,WAAWG,GAAX,GAAiBjB,GAAjB;;AAEA;AACAc,WAAWI,EAAX,GAAgBjB,OAAOiB,EAAvB;;AAEAJ,WAAWK,GAAX,GAAiBlB,OAAOkB,GAAxB;;AAEAL,WAAWM,GAAX,GAAiBnB,OAAOmB,GAAxB;;AAEAN,WAAWO,OAAX,GAAqBpB,OAAOoB,OAA5B;;AAEA;AACAP,WAAWQ,GAAX;;AAEA;AACAR,WAAWS,cAAX,GAA4BpB,OAAOoB,cAAnC;AACAT,WAAWU,gBAAX,GAA8BrB,OAAOqB,gBAArC;;AAEA;AACA;AACA;AACAC,OAAOC,OAAP,GAAiBZ,UAAjB","file":"larkplayer.js","sourcesContent":["/**\n * @file larkplayer.js larkplayer 入口函数\n * @author yuhui<yuhui06@baidu.com>\n * @date 2017/11/7\n */\n\nimport * as Dom from './utils/dom';\nimport * as Events from './utils/events';\nimport Component from './component';\nimport Player from './player';\nimport * as scriptLoader from './utils/script-loader';\nimport * as Plugin from './utils/plugin';\nimport log from './utils/log';\n\n// 包含所有兼容 es6 的代码\n// @todo 有没有更好的解决方案，目前看 babel-plugin-transform-runtime 不会解决在原型上的方法\n// @see https://www.zhihu.com/question/49382420/answer/115692473\nimport './shim/third_party/shim.min.js';\n\n// __uri 只在 fis 环境中支持\n// scriptLoader.loadCss(__uri('../css/larkplayer.less'));\n\nconst document = window.document;\n\nfunction normalize(el, options, readyFn) {\n    if (typeof el === 'string') {\n        if (el.charAt(0) !== '#') {\n            el = '#' + el;\n        }\n\n        el = Dom.$(el);\n    }\n\n    options = options || {};\n\n    // 默认添加 playsinline 属性\n    if (options.playsinline === undefined) {\n        options.playsinline = true;\n    }\n\n    readyFn = readyFn || function () {};\n\n    return {el, options, readyFn};\n}\n\n\nfunction larkplayer(el, options, readyFn) {\n    // () 避免 {} 在行首造成语法错误\n    ({el, options, readyFn} = normalize(el, options, readyFn));\n\n    const player = new Player(el, options, readyFn);\n\n    return player;\n}\n\n\n// verison\nlarkplayer.version = '1.0';\n\n// dom\nlarkplayer.dom = Dom;\n\n// events\nlarkplayer.on = Events.on;\n\nlarkplayer.one = Events.one;\n\nlarkplayer.off = Events.off;\n\nlarkplayer.trigger = Events.trigger;\n\n// log\nlarkplayer.log = log;\n\n// plugin\nlarkplayer.registerPlugin = Plugin.registerPlugin;\nlarkplayer.deregisterPlugin = Plugin.deregisterPlugin;\n\n// export default larkplayer;\n// for babel es6\n// @see https://github.com/babel/babel/issues/2724\nmodule.exports = larkplayer;"]}