{"version":3,"sources":["../../js/mixins/evented.js"],"names":["evented","Events","Dom","target","options","eventBusKey","eventBusEl","createEl","on","type","fn","off","one","trigger","data"],"mappings":";;;;;kBAgBwBA,O;;AAVxB;;IAAYC,M;;AACZ;;IAAYC,G;;;;AAEZ;;;;;;;AATA;;;;;;AAgBe,SAASF,OAAT,CAAiBG,MAAjB,EAAuC;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAClD;AACA,QAAMC,cAAcD,QAAQC,WAA5B;AACA,QAAIF,OAAOE,WAAP,KAAuBF,OAAOE,WAAP,EAAoB,UAApB,MAAoC,CAA/D,EAAkE;AAC9DF,eAAOG,UAAP,GAAoBH,OAAOE,WAAP,CAApB;AACH,KAFD,MAEO;AACHF,eAAOG,UAAP,GAAoBJ,IAAIK,QAAJ,CAAa,KAAb,CAApB;AACH;;AAEDJ,WAAOK,EAAP,GAAY,UAAUC,IAAV,EAAgBC,EAAhB,EAAoB;AAC5BT,eAAOO,EAAP,CAAUL,OAAOG,UAAjB,EAA6BG,IAA7B,EAAmCC,EAAnC;AACH,KAFD;;AAIAP,WAAOQ,GAAP,GAAa,UAAUF,IAAV,EAAgBC,EAAhB,EAAoB;AAC7BT,eAAOU,GAAP,CAAWR,OAAOG,UAAlB,EAA8BG,IAA9B,EAAoCC,EAApC;AACH,KAFD;;AAIAP,WAAOS,GAAP,GAAa,UAAUH,IAAV,EAAgBC,EAAhB,EAAoB;AAC7BT,eAAOW,GAAP,CAAWT,OAAOG,UAAlB,EAA8BG,IAA9B,EAAoCC,EAApC;AACH,KAFD;;AAIAP,WAAOU,OAAP,GAAiB,UAAUJ,IAAV,EAAgBK,IAAhB,EAAsB;AACnCb,eAAOY,OAAP,CAAeV,OAAOG,UAAtB,EAAkCG,IAAlC,EAAwCK,IAAxC;AACH,KAFD;AAGH","file":"evented.js","sourcesContent":["/**\n * @file 给一个对象添加事件方面的 api\n * @author yuhui<yuhui06@baidu.com>\n * @date 2017/11/7\n */\n\nimport * as Events from '../utils/events';\nimport * as Dom from '../utils/dom';\n\n/**\n * 使一个对象具有直接使用 on off one trigger 的能力\n *\n * @param {Object} target 要具有事件能力的对象\n * @param {Object} options 配置项\n * @param {string=} options.eventBusKey 很重要，整个事件流程所需的载体。target[eventBusKey] 应该是一个 DOM 元素\n */\nexport default function evented(target, options = {}) {\n    // @todo normalize args\n    const eventBusKey = options.eventBusKey;\n    if (target[eventBusKey] && target[eventBusKey]['nodeType'] === 1) {\n        target.eventBusEl = target[eventBusKey];\n    } else {\n        target.eventBusEl = Dom.createEl('div');\n    }\n\n    target.on = function (type, fn) {\n        Events.on(target.eventBusEl, type, fn);\n    };\n\n    target.off = function (type, fn) {\n        Events.off(target.eventBusEl, type, fn);\n    };\n\n    target.one = function (type, fn) {\n        Events.one(target.eventBusEl, type, fn);\n    };\n\n    target.trigger = function (type, data) {\n        Events.trigger(target.eventBusEl, type, data);\n    };\n}"]}