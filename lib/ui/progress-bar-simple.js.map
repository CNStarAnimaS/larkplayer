{"version":3,"sources":["../../js/ui/progress-bar-simple.js"],"names":["Dom","ProgressBarSimple","player","options","handleTimeUpdate","bind","line","$","el","on","percent","duration","currentTime","Math","round","style","width","children","forEach","child","reset","createElement","className","background","registerComponent","prototype"],"mappings":";;;;;;;;AAMA;;;;AACA;;IAAYA,G;;AAEZ;;;;;;;;;;+eATA;;;;;;IAWMC,iB;;;AACF,+BAAYC,MAAZ,EAAoBC,OAApB,EAA6B;AAAA;;AAAA,0IACnBD,MADmB,EACXC,OADW;;AAGzB,cAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,OAAxB;AACA,cAAKC,IAAL,GAAYN,IAAIO,CAAJ,CAAM,0BAAN,EAAkC,MAAKC,EAAvC,CAAZ;AACAN,eAAOO,EAAP,CAAU,YAAV,EAAwB,MAAKL,gBAA7B;AALyB;AAM5B;;;;2CAEkB;AACf;AACA,gBAAIM,UAAU,CAAd;AACA,gBAAIC,WAAW,KAAKT,MAAL,CAAYS,QAAZ,EAAf;AACA,gBAAIC,cAAc,KAAKV,MAAL,CAAYU,WAAZ,EAAlB;AACA,gBAAID,YAAYC,WAAhB,EAA6B;AACzB;AACAF,0BAAUG,KAAKC,KAAL,CAAWF,cAAcD,QAAd,GAAyB,GAApC,IAA2C,GAArD;AACA;AACAD,0BAAUA,UAAU,GAAV,GAAgB,GAA1B;AACH;;AAED,iBAAKJ,IAAL,CAAUS,KAAV,CAAgBC,KAAhB,GAAwBN,OAAxB;AACH;;;gCAEO;AACJ,iBAAKJ,IAAL,CAAUS,KAAV,CAAgBC,KAAhB,GAAwB,CAAxB;AACA,iBAAKC,QAAL,CAAcC,OAAd,CAAsB,iBAAS;AAC3BC,yBAASA,MAAMC,KAAf,IAAwBD,MAAMC,KAAN,EAAxB;AACH,aAFD;AAGH;;;mCAEU;AACP,gBAAMd,OAAON,IAAIqB,aAAJ,CAAkB,KAAlB,EAAyB;AAClCC,2BAAW;AADuB,aAAzB,CAAb;;AAIA,gBAAMC,aAAavB,IAAIqB,aAAJ,CAAkB,KAAlB,EAAyB;AACxCC,2BAAW;AAD6B,aAAzB,CAAnB;;AAIA,mBAAOtB,IAAIqB,aAAJ,CAAkB,KAAlB,EAAyB;AAC5BC,2BAAW;AADiB,aAAzB,EAEJC,UAFI,EAEQjB,IAFR,CAAP;AAGH;;;;;;AAGL,oBAAUkB,iBAAV,CAA4B,mBAA5B,EAAiDvB,iBAAjD;;AAEAA,kBAAkBwB,SAAlB,CAA4BtB,OAA5B,GAAsC;AAClCc,cAAU,CAAC,WAAD;AADwB,CAAtC;;kBAIehB,iB","file":"progress-bar-simple.js","sourcesContent":["/**\n * @file progress-bar-simple.js 简易版的进度条，当控制条消失时在视频底部显示\n * @author yuhui<yuhui06@baidu.com>\n * @date 2017/11/10\n */\n\nimport Component from '../component';\nimport * as Dom from '../utils/dom';\n\nimport './buffer-bar';\n\nclass ProgressBarSimple extends Component {\n    constructor(player, options) {\n        super(player, options);\n\n        this.handleTimeUpdate = this.handleTimeUpdate.bind(this);\n        this.line = Dom.$('.lark-progress-bar__line', this.el);\n        player.on('timeupdate', this.handleTimeUpdate);\n    }\n\n    handleTimeUpdate() {\n        // 进度条\n        let percent = 0;\n        let duration = this.player.duration();\n        let currentTime = this.player.currentTime();\n        if (duration && currentTime) {\n            // 保留两位小数四舍五入\n            percent = Math.round(currentTime / duration * 100) / 100;\n            // 转换为百分数\n            percent = percent * 100 + '%';\n        }\n\n        this.line.style.width = percent;\n    }\n\n    reset() {\n        this.line.style.width = 0;\n        this.children.forEach(child => {\n            child && child.reset && child.reset();\n        });\n    }\n\n    createEl() {\n        const line = Dom.createElement('div', {\n            className: 'lark-progress-bar__line'\n        });\n\n        const background = Dom.createElement('div', {\n            className: 'lark-progress-bar__background'\n        });\n\n        return Dom.createElement('div', {\n            className: 'lark-progress-bar--simple'\n        }, background, line);\n    }\n}\n\nComponent.registerComponent('ProgressBarSimple', ProgressBarSimple);\n\nProgressBarSimple.prototype.options = {\n    children: ['bufferBar']\n};\n\nexport default ProgressBarSimple;"]}