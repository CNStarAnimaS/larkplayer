{"version":3,"sources":["../../js/utils/fullscreen.js"],"names":["Events","document","window","API","browserApi","forEach","value","index","val","i","requestFullscreen","el","exitFullscreen","fullscreenElement","fullscreenEnabled","isFullscreen","fullscreenchange","callback","on","fullscreenerror","off","type","test"],"mappings":";;;;;;AAaA;;IAAYA,M;;;;AAEZ,IAAMC,WAAWC,OAAOD,QAAxB;;AAEA;;;AAjBA;;;;;;;;;;;;;AAoBA,IAAME,MAAM;AACR;AACA,CACI,mBADJ,EAEI,gBAFJ,EAGI,mBAHJ,EAII,mBAJJ,EAKI,kBALJ,EAMI,iBANJ,CAFQ;AAUR;AACA,CACI,yBADJ,EAEI,sBAFJ,EAGI,yBAHJ,EAII,yBAJJ,EAKI,wBALJ,EAMI,uBANJ,CAXQ;AAoBR;AACA,CACI,yBADJ,EAEI,wBAFJ,EAGI,gCAHJ,EAII,wBAJJ,EAKI,wBALJ,EAMI,uBANJ,CArBQ,EA8BR,CACI,sBADJ,EAEI,qBAFJ,EAGI,sBAHJ,EAII,sBAJJ,EAKI,qBALJ,EAMI,oBANJ,CA9BQ,EAsCR,CACI,qBADJ,EAEI,kBAFJ,EAGI,qBAHJ,EAII,qBAJJ,EAKI,oBALJ,EAMI,mBANJ,CAtCQ,CAAZ;;AAgDA,IAAIC,aAAa,EAAjB;;AAGAD,IAAIE,OAAJ,CAAY,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC1B,QAAID,SAASA,MAAM,CAAN,KAAYL,QAAzB,EAAmC;AAC/BK,cAAMD,OAAN,CAAc,UAACG,GAAD,EAAMC,CAAN,EAAY;AACtBL,uBAAWD,IAAI,CAAJ,EAAOM,CAAP,CAAX,IAAwBD,GAAxB;AACH,SAFD;AAGH;AACJ,CAND;;kBAQe;AACXE,qBADW,6BACOC,EADP,EACW;AAClBA,WAAGP,WAAWM,iBAAd;AACH,KAHU;AAIXE,kBAJW,4BAIM;AACbX,iBAASG,WAAWQ,cAApB;AACH,KANU;AAOXC,qBAPW,+BAOS;AAChB,eAAOZ,SAASG,WAAWS,iBAApB,CAAP;AACH,KATU;AAUXC,qBAVW,+BAUS;AAChB,eAAOb,SAASG,WAAWU,iBAApB,CAAP;AACH,KAZU;AAaXC,gBAbW,0BAaI;AACX,eAAO,CAAC,CAAC,KAAKF,iBAAL,EAAT;AACH,KAfU;AAgBXG,oBAhBW,4BAgBMC,QAhBN,EAgBgB;AACvBjB,eAAOkB,EAAP,CAAUjB,QAAV,EAAoBG,WAAWY,gBAA/B,EAAiDC,QAAjD;AACH,KAlBU;AAmBXE,mBAnBW,2BAmBKF,QAnBL,EAmBe;AACtBjB,eAAOkB,EAAP,CAAUjB,QAAV,EAAoBG,WAAWe,eAA/B,EAAgDF,QAAhD;AACH,KArBU;;AAsBX;AACAG,OAvBW,eAuBPC,IAvBO,EAuBDJ,QAvBC,EAuBS;AAChB,YAAI,SAASK,IAAT,CAAcD,IAAd,CAAJ,EAAyB;AACrBA,mBAAOjB,WAAWY,gBAAlB;AACH,SAFD,MAEO;AACHK,mBAAOjB,WAAWe,eAAlB;AACH;AACDnB,eAAOoB,GAAP,CAAWnB,QAAX,EAAqBoB,IAArB,EAA2BJ,QAA3B;AACH;AA9BU,C","file":"fullscreen.js","sourcesContent":["/**\n * @file 将 fullscreen api 抽象并统一\n * @author yuhui<yuhui06@baidu.com>\n * @date 2017/11/8\n * @desc\n *    1) 在全屏播放器的时候，选择将 video 的父元素全屏而不是将 video 标签全屏，在 pc 上可以帮你解决很多问题\n *    2) 这个全屏并不是万能的，在一些浏览器下依然无法全屏（如 ios safari、IE9）\n *\n * @see https://fullscreen.spec.whatwg.org/\n * @see https://developers.google.com/web/fundamentals/native-hardware/fullscreen/?hl=zh-cn\n * @see https://github.com/sindresorhus/screenfull.js/blob/gh-pages/readme.md\n */\n\nimport * as Events from './events';\n\nconst document = window.document;\n\n/**\n * @const 目前所有的 fullscreen api\n */\nconst API = [\n    // ideal api\n    [\n        'requestFullscreen',\n        'exitFullscreen',\n        'fullscreenElement',\n        'fullscreenEnabled',\n        'fullscreenchange',\n        'fullscreenerror'\n    ],\n    // New WebKit\n    [\n        'webkitRequestFullscreen',\n        'webkitExitFullscreen',\n        'webkitFullscreenElement',\n        'webkitFullscreenEnabled',\n        'webkitfullscreenchange',\n        'webkitfullscreenerror'\n\n    ],\n    // Old WebKit (Safari 5.1)\n    [\n        'webkitRequestFullScreen',\n        'webkitCancelFullScreen',\n        'webkitCurrentFullScreenElement',\n        'webkitCancelFullScreen',\n        'webkitfullscreenchange',\n        'webkitfullscreenerror'\n\n    ],\n    [\n        'mozRequestFullScreen',\n        'mozCancelFullScreen',\n        'mozFullScreenElement',\n        'mozFullScreenEnabled',\n        'mozfullscreenchange',\n        'mozfullscreenerror'\n    ],\n    [\n        'msRequestFullscreen',\n        'msExitFullscreen',\n        'msFullscreenElement',\n        'msFullscreenEnabled',\n        'MSFullscreenChange',\n        'MSFullscreenError'\n    ]\n];\n\nlet browserApi = {};\n\n\nAPI.forEach((value, index) => {\n    if (value && value[1] in document) {\n        value.forEach((val, i) => {\n            browserApi[API[0][i]] = val;\n        });\n    }\n});\n\nexport default {\n    requestFullscreen(el) {\n        el[browserApi.requestFullscreen]();\n    },\n    exitFullscreen() {\n        document[browserApi.exitFullscreen]();\n    },\n    fullscreenElement() {\n        return document[browserApi.fullscreenElement];\n    },\n    fullscreenEnabled() {\n        return document[browserApi.fullscreenEnabled];\n    },\n    isFullscreen() {\n        return !!this.fullscreenElement();\n    },\n    fullscreenchange(callback) {\n        Events.on(document, browserApi.fullscreenchange, callback);\n    },\n    fullscreenerror(callback) {\n        Events.on(document, browserApi.fullscreenerror, callback);\n    },\n    // @todo 不够优雅，不过好歹是给了事件注销的机会\n    off(type, callback) {\n        if (/change/.test(type)) {\n            type = browserApi.fullscreenchange;\n        } else {\n            type = browserApi.fullscreenerror;\n        }\n        Events.off(document, type, callback);\n    }\n};\n\n\n\n\n\n\n\n\n\n"]}